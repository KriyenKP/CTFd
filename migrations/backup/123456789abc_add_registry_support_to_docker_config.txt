"""Add registry support to docker_config table

Revision ID: 123456789abc
Revises: ef87d69ec29a
Create Date: 2024-01-01 00:00:00.000000

"""
import sqlalchemy as sa
from alembic import op

# revision identifiers, used by Alembic.
revision = '123456789abc'
down_revision = '6012fe8de495'
branch_labels = None
depends_on = None


def upgrade():
    # Add registry support columns to docker_config table
    op.add_column('docker_config', sa.Column('registry_url', sa.String(length=256), nullable=True))
    op.add_column('docker_config', sa.Column('registry_username', sa.String(length=128), nullable=True))
    op.add_column('docker_config', sa.Column('registry_password', sa.String(length=256), nullable=True))
    op.add_column('docker_config', sa.Column('use_registry', sa.Boolean(), nullable=True, default=False))


def downgrade():
    # Remove registry support columns from docker_config table
    op.drop_column('docker_config', 'use_registry')
    op.drop_column('docker_config', 'registry_password')
    op.drop_column('docker_config', 'registry_username')
    op.drop_column('docker_config', 'registry_url') 